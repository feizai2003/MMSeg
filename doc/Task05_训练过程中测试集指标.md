# è®­ç»ƒè¿‡ç¨‹ä¸­æµ‹è¯•æŒ‡æ ‡
- [è®­ç»ƒè¿‡ç¨‹ä¸­æµ‹è¯•æŒ‡æ ‡](#è®­ç»ƒè¿‡ç¨‹ä¸­æµ‹è¯•æŒ‡æ ‡)
  - [è®¾ç½®matplotlibä¸­æ–‡å­—ä½“](#è®¾ç½®matplotlibä¸­æ–‡å­—ä½“)
  - [è®­ç»ƒæ—¥å¿—å­˜æ”¾åœ¨ä¹‹å‰çš„æ¨¡å‹é…ç½®æ–‡ä»¶æŒ‡ç¤ºçš„ä½ç½®](#è®­ç»ƒæ—¥å¿—å­˜æ”¾åœ¨ä¹‹å‰çš„æ¨¡å‹é…ç½®æ–‡ä»¶æŒ‡ç¤ºçš„ä½ç½®)
    - [é‚£ä¹ˆè®­ç»ƒæ—¥å¿—çš„å†…å®¹å’Œæ ¼å¼æ˜¯ä»€ä¹ˆå‘¢](#é‚£ä¹ˆè®­ç»ƒæ—¥å¿—çš„å†…å®¹å’Œæ ¼å¼æ˜¯ä»€ä¹ˆå‘¢)
  - [æˆ‘ä»¬è¦æŠŠæ¯ä¸€è¡Œè¯»å…¥ï¼Œå®‰è£…æµ‹è¯•å’Œè®­ç»ƒåˆ†å¼€](#æˆ‘ä»¬è¦æŠŠæ¯ä¸€è¡Œè¯»å…¥å®‰è£…æµ‹è¯•å’Œè®­ç»ƒåˆ†å¼€)
  - [ç„¶åå°±æ˜¯ç”»å›¾é˜¶æ®µï¼Œä¹Ÿå°±æ˜¯å¯è§†åŒ–ï¼Œç›´è§‚æŸ¥çœ‹è®­ç»ƒè¿‡ç¨‹çš„å˜åŒ–](#ç„¶åå°±æ˜¯ç”»å›¾é˜¶æ®µä¹Ÿå°±æ˜¯å¯è§†åŒ–ç›´è§‚æŸ¥çœ‹è®­ç»ƒè¿‡ç¨‹çš„å˜åŒ–)
  - [æµ‹è¯•é›†æ€§èƒ½è¯„ä¼°](#æµ‹è¯•é›†æ€§èƒ½è¯„ä¼°)

## è®¾ç½®matplotlibä¸­æ–‡å­—ä½“
1. Windowsä¸‹ï¼š
    ```python
    plt.rcParams['font.sans-serif']=['SimHei']  # ç”¨æ¥æ­£å¸¸æ˜¾ç¤ºä¸­æ–‡æ ‡ç­¾ 
    plt.rcParams['axes.unicode_minus']=False  # ç”¨æ¥æ­£å¸¸æ˜¾ç¤ºè´Ÿå·
    ```
2. Linuxä¸‹ï¼š
    
3. Macä¸‹ï¼š

## è®­ç»ƒæ—¥å¿—å­˜æ”¾åœ¨ä¹‹å‰çš„æ¨¡å‹é…ç½®æ–‡ä»¶æŒ‡ç¤ºçš„ä½ç½®
ä¾‹å¦‚`work_dirs\Fgy_Dataset-PSPNet\20230817_084234\vis_data\scalars.json`
### é‚£ä¹ˆè®­ç»ƒæ—¥å¿—çš„å†…å®¹å’Œæ ¼å¼æ˜¯ä»€ä¹ˆå‘¢
å½“æˆ‘ä»¬æ‰“å¼€æ–‡ä»¶è§‚å¯Ÿå°±ä¼šå‘ç°ï¼šä»–æ˜¯ç”±**è®¸å¤šè¡Œ**çš„**å•ä¸ªjson**æ ¼å¼çš„æ•°æ®æ„æˆ  
æˆ‘è¿™é‡Œçš„**ç¬¬ä¸€è¡Œ**ä¾¿æ˜¯ï¼š   
`{"lr": 0.009997549655046198, "data_time": 0.003769183158874512, "loss": 1.7831202864646911, "decode.loss_ce": 1.231556272506714, "decode.acc_seg": 66.71924591064453, "aux.loss_ce": 0.5515639901161193, "aux.acc_seg": 69.98109436035156, "time": 30.29229862689972, "iter": 12, "memory": 5198, "step": 12}`  
å¯¹äºæ€ä¹ˆä¸€å¤§ä¸²ï¼Œçœ‹èµ·æ¥çœŸè´¹çœ¼ï¼Œè¦æ˜¯å’Œæ–‡ä»¶å¤¹ç›®å½•ä¸€æ ·çš„å±•ç¤ºä¸å°±ä¸€ç›®äº†ç„¶å—ï¼ŒTreeæ„Ÿè§‰å¾ˆè´´åˆ‡  
å› æ­¤è¿™é‡Œå°±ä»‹ç»ä¸¤ç§æ–¹æ³•:
1. ç¬¬ä¸€å¼ å½“ç„¶æ˜¯åˆ©ç”¨åœ¨çº¿çš„jsonè§£æå·¥å…·ï¼Œä¾‹å¦‚èœé¸Ÿå·¥å…·  
    ![img](../img/T5-1.png "img")  
    ç¡®å®æ¸…æ™°å•ŠğŸ˜

## æˆ‘ä»¬è¦æŠŠæ¯ä¸€è¡Œè¯»å…¥ï¼Œå®‰è£…æµ‹è¯•å’Œè®­ç»ƒåˆ†å¼€
> tips:pythonçš„å†…ç½®å‡½æ•°eval(),ä¼šè‡ªåŠ¨è¯†åˆ«ç±»å‹ï¼Œå¯ä»¥æŠŠjsonçš„æ–‡æœ¬æ•°æ®ï¼Œè¯†åˆ«å’Œè½¬æ¢æˆdictç±»å‹

## ç„¶åå°±æ˜¯ç”»å›¾é˜¶æ®µï¼Œä¹Ÿå°±æ˜¯å¯è§†åŒ–ï¼Œç›´è§‚æŸ¥çœ‹è®­ç»ƒè¿‡ç¨‹çš„å˜åŒ–
æ•´ä¸ªæµç¨‹ç¤ºæ„å›¾
```python
plt.figure(figsize=(16, 8)) # ç”»å¸ƒ

x = df_train['step'] # æ¨ªåæ ‡
for y in metrics:
    try:
        plt.plot(x, df_train[y], label=y, **get_line_arg()) # ç”»æŠ˜çº¿
    except:
        pass

plt.tick_params(labelsize=20) # è®¾ç½®åæ ‡è½´çš„åˆ»åº¦å­—ä½“å¤§å°
plt.xlabel('step', fontsize=20)
plt.ylabel('Loss', fontsize=20)
plt.title('è®­ç»ƒé›†æŸå¤±å‡½æ•°', fontsize=25)

plt.legend(fontsize=20) # è®¾ç½®å›¾åˆ—å­—ä½“å¤§å°

plt.savefig('å›¾è¡¨/è®­ç»ƒé›†æŸå¤±å‡½æ•°.pdf', dpi=120, bbox_inches='tight')

plt.show()
```
## æµ‹è¯•é›†æ€§èƒ½è¯„ä¼°
å’Œè®­ç»ƒä¸€æ ·ï¼Œé‡‡ç”¨çš„æ˜¯é…ç½®æ–‡ä»¶çš„æ–¹å¼  
**å…¶ä¸­åˆæœ‰ç²¾ç¡®åº¦å’Œé€Ÿç‡æŒ‡æ ‡**
1. `!python tools/test.py ZihaoDataset_PSPNet_20230626.py ./work_dirs/ZihaoDataset-PSPNet/iter_40000.pth`
2. `!python tools/analysis_tools/benchmark.py ZihaoDataset_PSPNet_20230626.py ./work_dirs/ZihaoDataset-PSPNet/iter_30000.pth`